<!-- sldsValidatorIgnore -->
<template>
	<div class="slds-form-element">
		<label class="slds-form-element__label" for="input"> {label} </label>
		<div class="slds-form-element__control" tabindex="0" onblur={handleBlur}>
			<div class={comboboxContainerClasses} style="width: 14rem">
				<div class={comboboxClasses}>
					<!--Combobox-->
					<div class={comboboxFormElementClasses} role="none">
						<!--Input Field-->
						<template if:false={selectedCurrency}>
							<input
								type="text"
								class="slds-input slds-combobox__input"
								role="combobox"
								placeholder="Search for Currency..."
								oninput={handleInput}
								autocomplete="off"
								onfocus={handleFocus}
								onblur={handleBlur}
								id="input"
							/>
							<span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right">
								<svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default">
									<use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#search"></use>
								</svg>
							</span>
						</template>
						<!--Selected Currency-->
						<template if:true={selectedCurrency}>
							<span class="slds-icon_container slds-icon-standard-account slds-combobox__input-entity-icon">
								<svg class="slds-icon slds-icon_small">
									<use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#moneybag"></use>
								</svg>
							</span>
							<button type="button" class="slds-input_faux slds-combobox__input slds-combobox__input-value" id="combobox-id-5-selected-value">
								<span class="slds-truncate" id="combobox-value-id-20">{selectedCurrency}</span>
							</button>
							<button
								class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"
								onclick={remove}
								title="Remove selected option"
							>
								<svg class="slds-button__icon" aria-hidden="true">
									<use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#close"></use>
								</svg>
								<span class="slds-assistive-text">Remove Selected</span>
							</button>
						</template>
					</div>

					<!--Listbox-->
					<div
						id="lookup-listbox"
						class="slds-dropdown slds-dropdown_length-10 slds-dropdown_fluid"
						role="listbox"
						onmousedown={handleMouseDown}
						onmouseup={handleMouseUp}
					>
						<ul class="slds-listbox slds-listbox_vertical" role="presentation">
							<template if:true={filteredCurrencies} for:each={filteredCurrencies} for:item="currency" for:index="index">
								<li key={currency.name} role="presentation" class="slds-listbox__item">
									<div
										class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
										role="option"
										data-symbol={currency.symbol}
										onmousedown={handleSelect}
									>
										<span class="slds-media__body">
											<span class="slds-listbox__option-text slds-listbox__option-text_entity">{currency.name}</span>
											<span class="slds-listbox__option-meta slds-listbox__option-meta_entity">{currency.symbol}</span>
										</span>
									</div>
								</li>
							</template>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>